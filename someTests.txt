Excellent ğŸ‘ tu travailles donc sur le projet Inception (probablement celui de lâ€™Ã©cole 42, avec Docker, Nginx, WordPress, MariaDB, etc.) â€” parfait !

Une fois que tu as terminÃ© la configuration et que tout build correctement, il faut tester mÃ©thodiquement chaque composant pour tâ€™assurer que tout fonctionne comme prÃ©vu.
Voici une checklist complÃ¨te et une mÃ©thode de test pas Ã  pas ğŸ”

ğŸ§° 1. VÃ©rifier que tous les conteneurs tournent

Lance ton projet :

make up


ou :

docker compose up -d


Puis vÃ©rifie :

docker ps


âœ… Tu dois voir 3 conteneurs actifs (si tu suis le sujet 42 classique) :

nginx

wordpress

mariadb

Si un conteneur est en Ã©tat Exited, regarde les logs :

docker logs <nom_du_conteneur>

ğŸ§© 2. Tester la base de donnÃ©es (MariaDB)

Entre dans le conteneur :

docker exec -it mariadb bash


Puis connecte-toi Ã  MySQL :

mysql -u <username> -p


Teste :

SHOW DATABASES;
USE <nom_de_ta_db>;
SHOW TABLES;


âœ… VÃ©rifie que la base WordPress est bien crÃ©Ã©e, et que tu peux y accÃ©der sans erreur.

ğŸŒ 3. Tester WordPress

Va sur ton navigateur :

https://<ton-domaine>/


(ex. https://votre_login.42.fr)

Tu dois voir ton site WordPress accessible en HTTPS, avec le certificat SSL auto-signÃ© que tu as gÃ©nÃ©rÃ©.

âœ… VÃ©rifie :

La redirection HTTP â†’ HTTPS fonctionne

Tu peux te connecter Ã  /wp-admin

Tu peux crÃ©er un article, changer un thÃ¨me, etc.

Le conteneur wordpress reste actif pendant que tu navigues

ğŸ”’ 4. VÃ©rifier le SSL et Nginx

VÃ©rifie la configuration Nginx :

docker exec -it nginx cat /etc/nginx/conf.d/default.conf


ou /etc/nginx/sites-enabled/default

âœ… VÃ©rifie que :

Le port 443 est bien configurÃ©

Le certificat SSL (.crt et .key) est bien rÃ©fÃ©rencÃ©

Le proxy_pass vers wordpress:9000 (ou autre port PHP-FPM) est correct

Puis, teste la connexion HTTPS :

curl -Ik https://<ton-domaine>/


Tu dois voir :

HTTP/2 200


et pas dâ€™erreur de certificat.

ğŸ“¦ 5. VÃ©rifier la persistance des volumes

Le but dâ€™Inception est que les donnÃ©es restent mÃªme aprÃ¨s un restart.

Fais :

docker compose down
docker compose up -d


âœ… VÃ©rifie que :

Ton site WordPress est toujours configurÃ©

Les articles et mÃ©dias existent toujours

Si ce nâ€™est pas le cas â†’ tes volumes ne sont pas bien montÃ©s.

ğŸ§¹ 6. VÃ©rifier la propretÃ© du projet

Avant de valider :

Lance make clean et make fclean â†’ tout doit bien se supprimer

make re â†’ tout doit bien se reconstruire sans erreur

Aucune dÃ©pendance inutile, pas dâ€™images Docker â€œdanglingâ€

VÃ©rifie les images :

docker images


âœ… Tu dois voir uniquement tes 3 images (nginx, wordpress, mariadb)

ğŸ”§ 7. Tests optionnels (bonus)
ğŸ§ª VÃ©rifie les ports :
sudo lsof -i -P -n | grep LISTEN


â†’ 443 et 80 doivent Ãªtre utilisÃ©s par Nginx.

ğŸ§± Teste les permissions :

Dans WordPress, essaie dâ€™ajouter un plugin ou une image â†’ si tu as une erreur de droit, corrige les permissions sur /var/www/html.
